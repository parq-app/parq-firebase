{
  // Read and write everything!
  "rules": {
    ".read": true,
    ".write": true,
    
    // Make sure that users have an email field and that an email is a string that matches this regex provided by Firebase
    "users": {
      "$users": {
        ".validate": "newData.hasChildren(['email', 'password'])",
        "email": {
          ".validate": "newData.isString() &&
                        newData.val().matches(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i)"
        },
        "password": {
          ".validate": "true"
        },
        "$other": {
          ".validate": "false"
        }
      }
    },
    
    // Reservations have a driver, host, and spot ID, a start and end time, a latitude, a longitude, and a geohash
    "reservations": {
      "$reservations": {
        ".validate": "newData.hasChildren(['driverId', 'hostId', 'spotId', 'status', 'timeStart', 'timeEnd', 'latitude', 'longitude', 'geohash'])",
        "driverId": {
          ".validate": "true"
        },
        "hostId": {
          ".validate": "true"
        },
        "spotId": {
          ".validate": "true"
        },
        "status": {
          ".validate": "true"
        },
        "timeStart": {
          ".validate": "true"
        },
        "timeEnd": {
          ".validate": "true"
        },
        "latitude": {
          ".validate": "true"
        },
        "longitude": {
          ".validate": "true"
        },
        "geohash": {
          ".validate": "true"
        },
        "$other": {
          ".validate": "false"
        }
      }
    }
  }
}
